<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function($http, $scope, $rootScope, spUtil, $window, $timeout) {
  /* widget controller */
  var c = this;
	
	$scope.show_quicklink = true;
	
	$scope.setSelected = function(){
		//c.data.currentCategory = 0;		
		$rootScope.$broadcast('sspCategorySelect', {
			"category" : c.data.svcCategories[c.data.currentCategory],
			"mode" : (c.data.currentMode >= 0) ? c.data.svcModes[c.data.currentMode] : "", 
			"icon": c.data.btnList[c.data.currentCategory].icon
		});
	};
	
	//c.onCatClick(c.data.currentCategory, '');
	
	/*
	if (c.data.agencyLinks && c.data.agencyLinks.length > 0) {
		c.data.myQuickLinks = c.data.agencyLinks;
		c.data.titleQL = "My Agency Links";
	} else {
		c.data.myQuickLinks = c.data.accessLinks;
		c.data.titleQL = "Account and Facility Access Links";
	}
	*/
	
	$scope.$on('sspCategorySelect', function(event, data) { 
		//if icon has been passed set it for the 
		//quicklinks tab
		if(data.hasOwnProperty('icon')){
			c.data.iconClass = data.icon	 
		}
		console.log("Data Icon: " + data.icon);
	
		if (data.category == "Department Specific") {
			c.data.titleQL = "My Agency Links";
			c.data.myQuickLinks = c.data.agencyLinks;
		} else if (data.category == "Account and Facility Access") {
			c.data.titleQL = "Account & Facility Access Links";
			c.data.myQuickLinks = c.data.accessLinks;
		} else if (data.category == "Desktop and Phone") {
			c.data.titleQL = "Desktop & Phone Links";
			c.data.myQuickLinks = c.data.desktopLinks;
		}else if (data.category == "IT Operations") {
			c.data.titleQL = "IT Operations Links";
			c.data.myQuickLinks = c.data.itOpsLinks;
		}else if (data.category == "Modern Workplace") {
			c.data.titleQL = "Modern Workplace Support Links";
			c.data.myQuickLinks = c.data.modernLinks;
		}
		
	});
	
	
	// Functions that emit events
	c.onCatClick = function(catIndex, event) {
		//RES::
		$('#ssp_id_' + c.data.parent_id + ' a.btn.color-ssp-secondary').removeClass('ssp-selected');
		if(event.target.nodeName == "I" || event.target.nodeName == "SPAN"){
			//get parent
			$( $(event.target).parent() ).addClass('ssp-selected');
		}else{
			//clicked on the anchor
			$(event.target).addClass('ssp-selected');
		}
		
		
		c.data.currentCategory = catIndex;
		var payload = {
			"category" : c.data.svcCategories[catIndex],
			"mode" : (c.data.currentMode >= 0) ? c.data.svcModes[c.data.currentMode] : "",
			"icon": c.data.btnList[catIndex].icon
		};
		$rootScope.$broadcast('sspCategorySelect', payload);
		c.data.panelTitle = c.data.svcCategories[catIndex];
		console.log("Category selected:"+JSON.stringify(payload));
	};
	
	c.launch = function() {
		
		var w = window.innerWidth;
		var h = window.innerHeight;
		
		console.log(w + ":" + h);
		
		var calcx = w;
		var calcy = h;
		
		console.log(calcx + ":" + calcy);
		
		window.open('https://saicprod.espressive.com/app/barista/?phrase=&submit=y', 'barista', 'height=736,width=460,top='+calcy+',left='+calcx+',location=no,scrollbars=no,status=no,titlebar=no,toolbar=no')
	};
	
	angular.element(document).ready(function(){
		$timeout(function(){
			$scope.setSelected();
		}, 100);
	});
	
}]]></client_script>
        <controller_as>c</controller_as>
        <css>/* SSP HP MASTER */
@media only screen and (max-width : 991px) {
	.panels-container {
 	  min-height : 240px;
	}
}

@media only screen and (min-width : 992px) {
	.panels-container {
 	  min-height : 240px;
	}
}

@media only screen and (max-width : 700px) {
	.ssp-panel-widget {
 	  height : 95%;
	}
}

.panel-heading {
    padding: 10px 15px 0;
  	background-color: $panel-heading-bg-color;
  	color: $panel-heading-text-color;
}

.ssp-custom-widget-header {
	font-size: 2rem;
  font-size: 16px;
  font-weight: 600;
}

.panel-heading-master {
	min-height: 52px;
	text-align: center; 
	padding-top: 20px
  
}

.panel-body-master {
	min-height: 285px !important;
  padding: 15px;
  padding-top: 20px;
}


/* Custom Widget Button */
.ssp-btn-widget {
	margin-top: 10px;
	margin-bottom: 10px;
	font-size: 16px;
	font-weight: 600;
}

.ssp-btn-widget-icon { 
	float: left;
	padding-right: 10px;
	width: 40px;
	position: relative;
}

.ssp-btn-txt { 
 	float: center;
	position: relative;
}
/*
//moved to the page level so this can be used in other widgets
//but should be in a Theme

ul.ssp-direct-list-group{
	max-height: 250px;
  overflow: auto;
}

.ssp-pretty-scroller::-webkit-scrollbar{
	width: 4px;
}

.ssp-pretty-scroller::-webkit-scrollbar-track{
	//-webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.3);
  border-top-right-radius: 10px;
  border-bottom-right-radius: 10px;
}

.ssp-pretty-scroller::-webkit-scrollbar-thumb{
	border-radius: 10px;
  -webkit-box-shadow: inset 0 0 4px rgba(0,0,0,0.5);
}

*/


/* Secondary Color Buttons */
/* Edit $color-ssp-secondary to customize button color */

//$color-ssp-secondary: $brand-secondary;
//$color-ssp-secondary-hover: darken(desaturate(adjust-hue($color-ssp-secondary, 1), 0.42%), 16.67);

.color-ssp-secondary {
	color: #FFFFFF;
	background-color: $brand-info;
	border-color: $brand-info;
}
.color-ssp-secondary:focus, .color-ssp-secondary.focus {
	color: $color-ssp-hover-text-color;
	background-color: $brand-primary;
	border-color: $brand-primary;
}
.color-ssp-secondary:hover {
	color: $color-ssp-hover-text-color;
	background-color: $brand-primary;
	border-color: $brand-primary;
}
.color-ssp-secondary:active, .color-ssp-secondary.active, .open &gt; .color-ssp-secondary.dropdown-toggle {
	color: $color-ssp-hover-text-color;
	background-color: $brand-primary;
	border-color: $brand-primary;
}
.color-ssp-secondary:active:hover, .color-ssp-secondary:active:focus, .color-ssp-secondary.focus:active, .color-ssp-secondary.active:hover, .color-ssp-secondary.active:focus, .color-ssp-secondary.active.focus, .open &gt; .color-ssp-secondary.dropdown-toggle:hover, .open &gt; .color-ssp-secondary.dropdown-toggle:focus, .open &gt; .color-ssp-secondary.dropdown-toggle.focus {
	color: $color-ssp-hover-text-color;
	background-color: $brand-primary;
	border-color: $brand-primary;
}
.color-ssp-secondary:active, .color-ssp-secondary.active, .open &gt; .color-ssp-secondary.dropdown-toggle {
	background-image: none;
}

// green Button //
.color-ssp-default {
  color: $color-ssp-text-color;
	background-color: $color-ssp-default-color;
	border-color: $color-ssp-default-color;
}
/*
.color-ssp-help:hover {
	background-color: darken(desaturate(adjust-hue($brand-success, 1), 0.42%), 16.67);
	border-color: darken(desaturate(adjust-hue($brand-success, 1), 0.42%), 16.67);
}
*/
// green Button //
.color-ssp-help {
	color: $color-ssp-text-color;
	background-color: $color-ssp-green;
	border-color: $color-ssp-green;
}
.color-ssp-help:focus, 
.color-ssp-green.focus {
	color: $color-ssp-hover-text-color;
	background-color: $color-ssp-w-focus-bg-color;
	border-color: $color-ssp-w-focus-border-color;
}
.color-ssp-help:hover {
	color: $color-ssp-hover-text-color;
	background-color: $color-ssp-w-hover-bg-color;
	border-color: $color-ssp-w-hover-border-color;
}
.color-ssp-help:active, 
.color-ssp-green.active, 
.open &gt; .color-ssp-green.dropdown-toggle {
	color: $color-ssp-hover-text-color;
	background-color: $color-ssp-w-hover-bg-color;
	border-color: $color-ssp-w-hover-border-color;
}
.color-ssp-help:active:hover, 
.color-ssp-help:active:focus, 
.color-ssp-help.focus:active, 
.color-ssp-help.active:hover, 
.color-ssp-help.active:focus, 
.color-ssp-green.active.focus, 
.open &gt; .color-ssp-green.dropdown-toggle:hover, 
.open &gt; .color-ssp-green.dropdown-toggle:focus, 
.open &gt; .color-ssp-green.dropdown-toggle.focus {
	color: $color-ssp-hover-text-color;
	background-color: $color-ssp-w-hover-bg-color;
	border-color: $color-ssp-w-hover-border-color;
}

/* END SSP HP MASTER */
</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>ssp_hp_master_v2</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>SSP HP Master v2</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */

	var msu = new SSPMyStuffUtil();
	
	// Use SSP MyStuff Util to fill
	// the various link lists
	
	data.agencyLinks = msu.getLinkListByCategory("agencyLinks");
	data.mainLinks = msu.getLinkListByCategory("mainLinks");
	data.accessLinks = msu.getLinkListByCategory("accessLinks");
	data.desktopLinks = msu.getLinkListByCategory("desktopLinks");
	data.itOpsLinks = msu.getLinkListByCategory("itOpsLinks");
	// For future use
	// data.modernLinks = msu.getLinkListByCategory("modernLinks");

	data.uDept = msu.getUserDepartment();
	data.hasITIL = gs.getUser().hasRole('itil');
	data.isManager = gs.getUser().isMemberOf('Persona - Manager');
	
	
	data.parent_id = $sp.getValue('sys_id');
	
	data.hasAgencyLinks = false;
	//start button list
		data.btnList = [
		{
			text: 'Account and Facility Access', 
			icon: 'fa-key'
		},
		{
			text: 'Desktop & Phone Requests', 
			icon: 'fa-laptop'
		},
		{
			text: 'IT Operations', 
			icon: 'fa-gears'
		}
// For Future Use
//		{
//			text: 'Modern Workplace Support', 
//			icon: 'fa-mobile-phone'
//		}	
	];
	
	//set categories
	data.svcCategories = [
		"Account and Facility Access",
		"Desktop and Phone",
		"IT Operations"
		// For future use
		// "Modern Workplace"
	];
	
	var agencyLinks = msu.getAgencyLinks();
	if (agencyLinks && agencyLinks.length > 0) {
		data.hasAgencyLinks = true;
		//add agency object
		data.btnList.unshift({text: 'My Department Requests', icon: 'fa-building-o'});	
		data.svcCategories.unshift("Department Specific");
	}
	


	
	data.panelTitle = "Our Services";
	
	data.svcModes = [
		"Help",
		"Services",
		"Answers"
	];
	
	data.currentCategory = 0;
	// If user has ITIL, and is NOT a Manager
	// default to IT Operations category
	if (!data.hasAgencyLinks && data.hasITIL && !data.isManager) {
		data.currentCategory = 2;
	}

	data.currentMode = -1;

	
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admindavid</sys_created_by>
        <sys_created_on>2020-08-27 16:12:03</sys_created_on>
        <sys_id>2d44f54fdbbed89089aa05d2ca9619d7</sys_id>
        <sys_mod_count>73</sys_mod_count>
        <sys_name>SSP HP Master v2</sys_name>
        <sys_package display_value="PersonaPortal" source="x_saico_eppersona">d2c8b27cdb4e981036d27e09af961908</sys_package>
        <sys_policy/>
        <sys_scope display_value="PersonaPortal">d2c8b27cdb4e981036d27e09af961908</sys_scope>
        <sys_update_name>sp_widget_2d44f54fdbbed89089aa05d2ca9619d7</sys_update_name>
        <sys_updated_by>adminbleicherd</sys_updated_by>
        <sys_updated_on>2021-09-02 15:57:05</sys_updated_on>
        <template><![CDATA[<div class="panel panel-default b" ng-attr-id="ssp_id_{{ c.data.parent_id }}">  

  <div class="panel-heading panel-heading-master">
    <h2 class="panel-title ssp-custom-widget-header">Services</h2>
  </div>  
  
  <div  class="panel-body-master container-fluid">  

    <div class="col-sm-6 col-md-7 col-lg-6">
      
      <div class="ssp-button" ng-repeat="item in c.data.btnList">
        <a class="btn ssp-btn-widget color-ssp-secondary btn-block ng-binding" role="button" 
           ng-class="{'ssp-selected': $index===c.data.currentCategory}" 
           ng-click="c.onCatClick($index, $event)">
          <i class="fa fa-stack-1x fa-inverse ssp-btn-widget-icon" ng-class="item.icon"></i>{{ item.text }}</a>  
      </div>
      
    </div>
    
    <div class="col-sm-6 col-md-5 col-lg-6">
      <div ng-if="c.data.currentCategory >= 0">
         <span style="font-size: 125%; text-align: center;"><strong>{{c.data.svcCategories[c.data.currentCategory]}} Links:</strong></span>			
      </div>

      <div class="row">
          
          <div class="col-sm-12">
            <ul class="ssp-direct-list-group list-group list-group-links">
              <li class="list-group-item" ng-repeat="item in c.data.myQuickLinks">
              <a href="{{item.link}}" target="{{item.target}}"><strong><i class="fa fa-arrow-circle-right"></i></strong> {{item.title}}</a>
              </li>  
            </ul>
          </div>
          
      </div>
  	</div>
    
  </div>

</div>]]></template>
    </sp_widget>
</record_update>
